<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>我的导航</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header></header>
  <main>
    <div class="wrapper" id="main">
    </div>
  </main>
  <footer></footer>
  <script>
  var keys = {
    0: ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'],
    1: ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l'],
    2: ['z', 'x', 'c', 'v', 'b', 'n', 'm'],
    // 3: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']
    length: 3
  }
  var hash = {
    q: 'www.qq.com',
    w: 'weibo.com'
  }
  var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null')

  if (hashInLocalStorage) {
    hash = hashInLocalStorage
  }

  index = 0
  while (index < keys['length']) {
    div = document.createElement('div')
    div.className = 'row'
    main.appendChild(div)
    row = keys[index]
    index2 = 0
    while (index2 < row.length) {
      kbd = document.createElement('kbd')
      span = document.createElement('span')
      span.textContent = row[index2]
      span.className = 'text'
      kbd.appendChild(span)
      kbd.className = 'key'
      button = document.createElement('button')
      button.textContent = '编辑'
      button.id = row[index2]
      img = document.createElement('img')
      if (hash[row[index2]]) {
        img.src = 'https://' + hash[row[index2]] + '/favicon.ico'
      } else {
        img.src = '//i.loli.net/2019/04/26/5cc2e15fad8c9.png'
      }
      button.onclick = function (ex) {
        key = ex['target']['id']
        x = prompt('给我一个网址')
        hash[key] = x
        localStorage.setItem('zzz', JSON.stringify(hash))
      }
      kbd.appendChild(img)
      kbd.appendChild(button)
      div.appendChild(kbd)
      index2 += 1
    }
    index += 1
  }

  document.onkeypress = function (va) {
    key = va['key']
    website = hash[key]
    window.open('https://' + website, '_blank')
  }
  </script>
</body>
</html>
